# 正则表达式

## 正则表达式相关知识

在编写处理字符串的程序或网页时，经常会有查找符合某些复杂规则的字符串的需要。正则表达式就是用于描述这些规则的工具。换句话说，正则表达式就是记录文本规则的代码。它定义了字符串的匹配模式(如何检查一个字符串是否有跟某种模式匹配的部分或者从一个字符串中将与模式匹配的部分提取出来或者替换掉等)。今天几乎所有的编程语言都提供了对正则表达式操作的支持，Python通过标准库中的`re`模块来支持正则表达式操作。

关于正则表达式的知识，本文主要参考了[《正则表达式30分钟入门》](https://deerchao.cn/tutorials/regex/regex.htm)，这篇文章主要以.NET正则表达式为主。

### 正则表达式入门

假设我们要在一篇英语文章中查找`hi`，我们就可以使用正则表达式`hi`。它可以精准匹配到这样的字符串：由两个字符组成，前一个字符是`h`，后一个字符是`i`。通常，处理正则表达式的工具会提供一个忽略大小写的选项，如果选中了这个选项，它可以匹配`Hi`、`HI`、`hI`、`hi`等字符串。但不幸的是，很多单词里包含`hi`这两个连续的字符，比如`him`、`hire`、`his`等。如果要精准地查找`hi`这个单词的话，我们应该使用`\bhi\b`。
`\b`是正则表达式规定的一个特殊代码（也可称他为元字符，metacharacter），代表着单词的开头或结尾，也就是单词的分界处。虽然通常英文的单词是由空格、标点符号或者换行来分隔的，但是`\b`并不匹配这些单词分隔字符中的任何一个，它只匹配一个位置。
假如我们要找的是hi后面跟着Lucy，我们应该用`\bhi\bLucy`。这里`.`是另一个元字符，匹配除了换行符以外的任意字符。`*`同样是元字符，不过它代表的不是字符，也不是位置，而是数量——它指定`*`前边的内容可以连续重复使用任意次以使整个表达式得到匹配。因此，`.*`意味着任意数量的不包含换行的字符。现在`\bhi\b.*\bLucy\b`的意思就很明显了：先是一个单词`hi`，然后是任意个任意字符，最后是Lucy这个单词。
一点补充： 从更精确的角度来说，`\b`匹配这样的位置：它的前一个字符和后一个字符不全是(一个是，一个不是或不存在)`\w`。换行符就是`\n`。
如果同时使用其他元字符，我们就能构造出功能更强大的正则表达式。比如`0\d\d-\d\d\d\d\d\d\d\d`，就是以0为开头，然后是两个数字，然后是一个连字号-，最后是8个数字。这里的`\d`是个新的元字符，匹配一位数字，-不是元字符，只匹配它本身。为了避免重复，我们可以将表达式写为`0\d{2}-\d{8}`。这里的`\d`后面的`{2}{8}`的意思是前面`\d`必须连续重复匹配2次(8次)。
下面是更多的例子:
`\ba\w*\b`匹配以字母a开头的单词——先是某个单词开始处(\b)，然后是字母a,然后是任意数量的字母或数字(\w*)，最后是单词结束处(\b)。
`\d+`匹配1个或更多连续的数字。这里的+是和*类似的元字符，不同的是*匹配重复任意次(可能是0次)，而+则匹配重复1次或更多次。
`\b\w{6}\b`匹配刚好6个字符的单词。
|
